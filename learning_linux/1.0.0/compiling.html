<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Linux Kernel Compilation :: My Notebook</title>
    <link rel="canonical" href="https://abhisheksafui.github.io/learning_linux/1.0.0/compiling.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../_/css/site.css">
<link rel="stylesheet" href="../../_/css/extra.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://abhisheksafui.github.io">My Notebook</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="learning_linux" data-version="1.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="getting_started.html">The Linux Operating System</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="getting_started.html">Preparation for Kernel Hacking</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="compiling.html">Compiling the linux kernel</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="booting_vm.html">Booting the linux kernel in a Virtual Machine</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="attaching_gdb.html">Attaching GDB to the linux kernel</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">The Linux Operating System</span>
    <span class="version">1.0.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../about/1.0.0/resume.html">About me</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../about/1.0.0/resume.html">1.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="getting_started.html">The Linux Operating System</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="getting_started.html">1.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../about/1.0.0/resume.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="getting_started.html">The Linux Operating System</a></li>
    <li><a href="compiling.html">Compiling the linux kernel</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///home/abhi/code/hobby/antora/learning-linux-antora-doc/modules/ROOT/pages/compiling.adoc">Edit this Page</a></div>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Linux Kernel Compilation</h1>
<div class="sect1">
<h2 id="_compiling_the_linux_kernel_for_the_same_target_architecture"><a class="anchor" href="#_compiling_the_linux_kernel_for_the_same_target_architecture"></a>Compiling the linux kernel for the same target architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fetch the Linux kernel code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">git clone git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux.git
cd linux
git checkout v6.1.6</code></pre>
</div>
</div>
<div class="paragraph">
<p>After fetching the Linux kernel source code, we need to configure the features
to be compiled, using a .config file that can be generated using make menuconfig
command. A default config will get generated if we run make menuconfig and do
not modify any configuration. We may not be interested in all the features
provided by the Linux kernel default configuration. Disabling unnecessary
drivers and other Linux kernel features will reduce the kernel compilation
time and size.</p>
</div>
<div class="paragraph">
<p>For the first build we may go ahead with the default .config file generated by
running make menuconfig for the first time. Later we can replace the .config file
with a minimal set of features that we need for our development and testing purposes.</p>
</div>
<div class="paragraph">
<p>To build the kernel just execute the make command with the number of cores available
in your system as follows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">make -j &lt;num_cores&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you encounter errors related to system certificates (required for verification
of signed kernel modules for security purposes), disable them to avoid complexity
while getting started with the development process.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">scripts/config --disable SYSTEM_TRUSTED_KEYS
scripts/config --disable SYSTEM_REVOCATION_KEYS</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the kernel is compiled it will be available at <code>arch/x86_64/boot/bzImage</code>.
<code>bzImage</code>, the big zImage, is one of the many formats in which the linux kernel
can be delivered. Other formats are <code>vmlinux</code>, <code>vmlinux.bin</code>, <code>vmlinuz</code>, <code>zImage</code>,</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
